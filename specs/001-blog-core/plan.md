# Implementation Plan: 개발자 블로그 핵심 기능

**Branch**: `main` | **Date**: 2026-01-08 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/001-blog-core/spec.md`

**Note**: This document is generated by the `/speckit.plan` command.

## Summary

Astro 5.x 기반 정적 블로그 구축. 핵심 요구사항은 포스트 읽기/검색/필터링, MDX 콘텐츠 렌더링, Shiki 코드 하이라이팅, Giscus 댓글, SEO 최적화입니다. 성능 목표는 LCP < 2.5s, FID < 100ms, CLS < 0.1이며, Lighthouse 95+ 점수를 달성해야 합니다. 컴포넌트 분류 규칙에 따라 상태/이벤트가 필요한 SearchModal, Button은 React(.tsx)로, 나머지는 Astro(.astro)로 구현합니다.

## Technical Context

**Language/Version**: TypeScript 5.x
**Primary Dependencies**: Astro 5.x, React 19.x, TailwindCSS 4.x, ESLint, Prettier, MDX, Shiki, Giscus
**Storage**: File-based (MDX files in Git repository)
**Target Platform**: Static site (deployed to CDN, e.g., Vercel, Netlify, Cloudflare Pages)
**Project Type**: Single web project (static site generator)
**Performance Goals**: LCP < 2.5s, FID < 100ms, CLS < 0.1, Lighthouse 95+, 검색 응답 < 200ms
**Constraints**: 0 bytes JavaScript 기본, SSR 금지, 빌드타임 처리 우선, 상태 관리 라이브러리 금지
**Scale/Scope**: 개인 블로그 (~100 포스트 예상), 동시 접속자 < 1000명, 모바일 반응형

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### I. 성능 우선 (Performance First) ✅

- ✅ **Astro Islands 아키텍처**: SearchModal, Button만 React로 hydrate. 나머지는 Astro로 0 bytes JS
- ✅ **빌드타임 처리**: MDX 콘텐츠, Shiki 코드 하이라이팅, 이미지 최적화 모두 빌드 시점
- ✅ **성능 목표**: LCP < 2.5s, FID < 100ms, CLS < 0.1, Lighthouse 95+ (spec SC-002와 일치)
- ✅ **SSR 금지**: 정적 생성만 사용

### II. 컴포넌트 분류 규칙 (Component Classification Rule) ✅

- ✅ **React (.tsx)**: SearchModal (검색 입력/결과 상태), Button (onClick 이벤트)
- ✅ **Astro (.astro)**: Comments (Giscus script 래퍼), Card, Header, Footer, BaseLayout
- ✅ **판단 기준 준수**: "상태/이벤트 필요 여부"로 명확히 분류됨

### III. 빌드타임 우선 처리 (Build-Time Over Runtime) ✅

- ✅ **코드 하이라이팅**: Shiki 사용 (빌드타임)
- ✅ **댓글**: Giscus script 태그 (React 래퍼 불필요)
- ✅ **콘텐츠**: MDX (빌드 시점 처리)
- ✅ **이미지 최적화**: Astro Image 컴포넌트 (빌드타임)

### IV. 지연 로딩 및 코드 스플리팅 (Lazy Loading & Code Splitting) ✅

- ✅ **컴포넌트 스플리팅**: SearchModal은 `client:idle` 사용
- ✅ **이미지 지연 로딩**: Astro Image의 `loading="lazy"` 속성
- ✅ **라우트 기반 스플리팅**: Astro 자동 처리

### V. TypeScript 타입 안정성 (TypeScript Type Safety) ✅

- ✅ **`any` 금지**: 모든 컴포넌트 props, 유틸리티 함수에 타입 정의
- ✅ **컴포넌트 props**: React/Astro 컴포넌트 모두 명시적 인터페이스
- ✅ **공유 타입**: `src/types/` 디렉토리에 공통 타입 정의

### VI. 데이터 페칭 및 캐싱 (Data Fetching & Caching) ✅

- ✅ **빌드타임 페칭**: Astro 컴포넌트에서 포스트 메타데이터 로드
- ✅ **클라이언트 사이드**: 검색 기능에만 fetch API 사용 (포스트 목록 필터링)
- ⚠️ **주의사항**: 클라이언트 데이터 페칭은 검색 모달에서만 사용. 대부분의 데이터는 빌드타임에 처리됨

### 기술 제약사항 준수 ✅

- ✅ **승인된 스택**: Astro 5.x, React 19.x, TypeScript 5.x, TailwindCSS 4.x, ESLint, Prettier, MDX, Shiki, Giscus 모두 사용
- ✅ **금지 기술 회피**: SSR 미사용, 자체 댓글 시스템 미구축, Redux/MobX/Zustand 미사용, CSS 프레임워크 혼용 없음, 불필요한 의존성(@tanstack/react-query, zod) 제거

**GATE 결과**: ✅ 모든 헌법 원칙 준수. Phase 0 진행 가능.

## Project Structure

### Documentation (this feature)

```text
specs/001-blog-core/
├── plan.md              # 이 파일
├── research.md          # Phase 0 output
├── data-model.md        # Phase 1 output
├── quickstart.md        # Phase 1 output
├── contracts/           # Phase 1 output (API 스키마 - 필요시)
└── tasks.md             # Phase 2 output (별도 명령어)
```

### Source Code (repository root)

```text
src/
├── components/
│   ├── react/           # React 인터랙티브 컴포넌트 (.tsx)
│   │   ├── SearchModal.tsx
│   │   ├── ThemeToggle.tsx
│   │   └── Button.tsx
│   └── astro/           # Astro 정적 컴포넌트 (.astro)
│       ├── Comments.astro
│       ├── Card.astro
│       ├── Header.astro
│       ├── Footer.astro
│       └── BaseLayout.astro
├── content/
│   ├── blog/            # MDX 블로그 포스트
│   │   └── *.mdx
│   └── config.ts        # Content collection 정의
├── layouts/
│   └── BaseLayout.astro # 기본 레이아웃
├── pages/
│   ├── index.astro      # 홈/포스트 목록
│   ├── posts/
│   │   └── [slug].astro # 포스트 상세 페이지
│   ├── categories/
│   │   └── [category].astro
│   └── tags/
│       └── [tag].astro
├── styles/
│   └── global.css       # TailwindCSS 전역 스타일
├── types/
│   └── index.ts         # 공유 타입 정의
└── utils/
    ├── post.ts          # 포스트 유틸리티
    └── search.ts        # 검색 로직

public/
├── images/              # 정적 이미지
└── robots.txt
```

**Structure Decision**: Astro의 기본 단일 프로젝트 구조 사용. `src/components/`를 `react/`와 `astro/`로 분리하여 컴포넌트 분류 규칙을 명확히 합니다. Content Collections API를 사용하여 MDX 포스트를 타입 안전하게 관리합니다.

## Complexity Tracking

**해당 사항 없음**: 모든 헌법 원칙을 준수하며 위반 사항이 없습니다.
